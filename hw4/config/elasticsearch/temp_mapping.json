{
  "mappings": {
    "properties": {
      "url": { "type": "keyword" },
      "title": {
        "type": "text",
        "analyzer": "default",
        "fields": {
          "keyword": { "type": "keyword" }
        }
      },
      "content": { "type": "text", "analyzer": "default" },
      "html": { "type": "text", "store": true },
      "anchor_texts": {
        "type": "nested",
        "properties": {
          "text": { "type": "text", "analyzer": "default" },
          "href": { "type": "keyword" }
        }
      },
      "domain": { "type": "keyword" },
      "metadata": {
        "properties": {
          "crawl_time": { "type": "date" },
          "last_modified": { "type": "date" },
          "content_type": { "type": "keyword" }
        }
      },
      "attachments": {
        "type": "nested",
        "properties": {
          "url": { "type": "keyword" },
          "filename": {
            "type": "text",
            "fields": {
              "keyword": { "type": "keyword" }
            }
          },
          "type": { "type": "keyword" },
          "metadata": {
            "properties": {
              "title": { "type": "text", "analyzer": "default" },
              "author": { "type": "text" },
              "upload_date": { "type": "date" },
              "file_size": { "type": "long" }
            }
          }
        }
      }
    }
  },
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 1,
    "analysis": {
      "analyzer": {
        "default": {
          "type": "custom",
          "tokenizer": "ik_smart"
        }
      }
    }
  }
}
